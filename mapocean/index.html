<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoTIFF Viewer - Kerala Flood Analysis</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h2>Loading GeoTIFF Viewer</h2>
      <p>Initializing geospatial data...</p>
    </div>
  </div>

  <!-- Main Map Container -->
  <div id="map"></div>

  <!-- Modern Control Panel -->
  <div class="control-panel">
    <div class="panel-header">
      <h1>GeoTIFF Viewer</h1>
      <p>Kerala Flood Analysis • Sentinel-1 SAR</p>
    </div>

    <!-- File Upload Section -->
    <div class="section">
      <h3>Upload Data</h3>
      <div class="upload-group">
        <div class="file-input-wrapper">
          <input type="file" id="left-file" accept=".tif,.tiff" hidden>
          <label for="left-file" class="file-input-label">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14,2 14,8 20,8"></polyline>
            </svg>
            <span id="left-file-name">Left Map</span>
          </label>
        </div>
        <div class="file-input-wrapper">
          <input type="file" id="right-file" accept=".tif,.tiff" hidden>
          <label for="right-file" class="file-input-label">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14,2 14,8 20,8"></polyline>
            </svg>
            <span id="right-file-name">Right Map</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Data Selection -->
    <div class="section">
      <h3>Data Selection</h3>
      <div class="control-group">
        <div class="control-item">
          <label for="left-year">Left Map</label>
          <select id="left-year" class="modern-select">
            <option value="2018">2018 Flood</option>
            <option value="2020-after">2020 After</option>
            <option value="2020-before">2020 Before</option>
            <option value="2022-after">2022 After</option>
            <option value="2022-before">2022 Before</option>
            <option value="2025-after">2025 After</option>
            <option value="2025-before">2025 Before</option>
            <option value="2025">2025 Flood</option>
          </select>
        </div>
        <div class="control-item">
          <label for="right-year">Right Map</label>
          <select id="right-year" class="modern-select">
            <option value="2018">2018 Flood</option>
            <option value="2020-after">2020 After</option>
            <option value="2020-before">2020 Before</option>
            <option value="2022-after">2022 After</option>
            <option value="2022-before">2022 Before</option>
            <option value="2025-after">2025 After</option>
            <option value="2025-before">2025 Before</option>
            <option value="2025">2025 Flood</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Opacity Controls -->
    <div class="section">
      <h3>Layer Opacity</h3>
      <div class="control-group">
        <div class="control-item">
          <label for="left-opacity">Left: <span id="left-opacity-value">60%</span></label>
          <input type="range" id="left-opacity" min="0" max="100" value="60" class="modern-slider">
        </div>
        <div class="control-item">
          <label for="right-opacity">Right: <span id="right-opacity-value">60%</span></label>
          <input type="range" id="right-opacity" min="0" max="100" value="60" class="modern-slider">
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="section">
      <div class="button-group">
        <button id="sync-maps" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
          Sync Views
        </button>
        <button id="reset-view" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
          Reset View
        </button>
      </div>
    </div>
  </div>

  <!-- Home Button -->
  <div class="home-button">
    <a href="../index.html" class="home-link">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9,22 9,12 15,12 15,22"></polyline>
      </svg>
      <span>Home</span>
    </a>
  </div>

  <!-- Modern Legend - Right Side -->
  <div class="legend">
    <div class="legend-header">
      <h3>Data Legend</h3>
    </div>
    <div class="legend-items">
      <div class="legend-item">
        <div class="legend-color" style="background: linear-gradient(90deg, #0066ff, #00bfff);"></div>
        <span>Left: Water/Flood (Blue)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: linear-gradient(90deg, #00ff00, #00cc00);"></div>
        <span>Right: Water/Flood (Green)</span>
      </div>
    </div>
    <div class="legend-footer">
      <small>Sentinel-1 SAR • 16-bit GeoTIFF</small>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/georaster@1.6.0/dist/georaster.browser.bundle.min.js"></script>
  <script src="https://unpkg.com/georaster-layer-for-leaflet@3.10.0/dist/georaster-layer-for-leaflet.min.js"></script>
  <script src="https://unpkg.com/leaflet-side-by-side@2.2.0/dist/leaflet-side-by-side.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
